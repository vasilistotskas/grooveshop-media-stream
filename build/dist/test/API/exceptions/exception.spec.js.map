{"version":3,"sources":["../../../../../src/test/API/exceptions/exception.spec.ts"],"sourcesContent":["import {\r\n\tBackgroundOptions,\r\n\tFitOptions,\r\n\tPositionOptions,\r\n\tResizeOptions,\r\n\tSupportedResizeFormats,\r\n} from '@microservice/API/dto/cache-image-request.dto'\r\nimport RequestedResizeTargetTooLargeException from '@microservice/API/exceptions/requested-resize-target-too-large.exception'\r\n\r\nimport UnableToFetchResourceException from '@microservice/API/exceptions/unable-to-fetch-resource.exception'\r\nimport UnableToStoreFetchedResourceException from '@microservice/API/exceptions/unable-to-store-fetched-resource.exception'\r\nimport { describe, expect, it } from 'vitest'\n\r\ndescribe('requestedResizeTargetTooLargeException', () => {\r\n\tit('should create an error with the correct message', () => {\r\n\t\tconst resizeRequest: ResizeOptions = {\r\n\t\t\twidth: 5000,\r\n\t\t\theight: 4000,\r\n\t\t\tfit: FitOptions.contain,\r\n\t\t\tposition: PositionOptions.center,\r\n\t\t\tformat: SupportedResizeFormats.webp,\r\n\t\t\tbackground: BackgroundOptions.transparent,\r\n\t\t\ttrimThreshold: 5,\r\n\t\t\tquality: 90,\r\n\t\t}\r\n\r\n\t\tconst allowedPixelCount = 20000000\r\n\t\tconst expectedMessage = `Requested resize target (${resizeRequest.width}x${resizeRequest.height}) exceeded maximum allowed size of ${allowedPixelCount} total pixels`\r\n\r\n\t\tconst exception = new RequestedResizeTargetTooLargeException(resizeRequest, allowedPixelCount)\r\n\r\n\t\texpect(exception.message).toBe(expectedMessage)\r\n\t})\r\n\r\n\tit('should be an instance of Error', () => {\r\n\t\tconst resizeRequest: ResizeOptions = {\r\n\t\t\twidth: 1000,\r\n\t\t\theight: 1000,\r\n\t\t\tfit: FitOptions.contain,\r\n\t\t\tposition: PositionOptions.center,\r\n\t\t\tformat: SupportedResizeFormats.webp,\r\n\t\t\tbackground: BackgroundOptions.transparent,\r\n\t\t\ttrimThreshold: 5,\r\n\t\t\tquality: 90,\r\n\t\t}\r\n\r\n\t\tconst allowedPixelCount = 1000000\r\n\t\tconst exception = new RequestedResizeTargetTooLargeException(resizeRequest, allowedPixelCount)\r\n\r\n\t\texpect(exception).toBeInstanceOf(Error)\r\n\t})\r\n})\r\n\r\ndescribe('unableToFetchResourceException', () => {\r\n\tit('should create an error with the correct message', () => {\r\n\t\tconst resource = 'http://example.com/image.jpg'\r\n\t\tconst expectedMessage = `Requested resource: ${resource} couldn't be fetched`\r\n\r\n\t\tconst exception = new UnableToFetchResourceException(resource)\r\n\r\n\t\texpect(exception.message).toBe(expectedMessage)\r\n\t})\r\n\r\n\tit('should be an instance of Error', () => {\r\n\t\tconst resource = 'http://example.com/image.jpg'\r\n\t\tconst exception = new UnableToFetchResourceException(resource)\r\n\r\n\t\texpect(exception).toBeInstanceOf(Error)\r\n\t})\r\n})\r\n\r\ndescribe('unableToStoreFetchedResourceException', () => {\r\n\tit('should create an error with the correct message', () => {\r\n\t\tconst resource = 'http://example.com/image.jpg'\r\n\t\tconst expectedMessage = `Requested resource: ${resource} couldn't be stored`\r\n\r\n\t\tconst exception = new UnableToStoreFetchedResourceException(resource)\r\n\r\n\t\texpect(exception.message).toBe(expectedMessage)\r\n\t})\r\n\r\n\tit('should be an instance of Error', () => {\r\n\t\tconst resource = 'http://example.com/image.jpg'\r\n\t\tconst exception = new UnableToStoreFetchedResourceException(resource)\r\n\r\n\t\texpect(exception).toBeInstanceOf(Error)\r\n\t})\r\n})\r\n"],"names":["BackgroundOptions","FitOptions","PositionOptions","SupportedResizeFormats","RequestedResizeTargetTooLargeException","UnableToFetchResourceException","UnableToStoreFetchedResourceException","describe","expect","it","resizeRequest","width","height","fit","contain","position","center","format","webp","background","transparent","trimThreshold","quality","allowedPixelCount","expectedMessage","exception","message","toBe","toBeInstanceOf","Error","resource"],"mappings":"AAAA,SACCA,iBAAiB,EACjBC,UAAU,EACVC,eAAe,EAEfC,sBAAsB,QAChB,0DAA+C;AACtD,OAAOC,4CAA4C,qFAA0E;AAE7H,OAAOC,oCAAoC,4EAAiE;AAC5G,OAAOC,2CAA2C,oFAAyE;AAC3H,SAASC,QAAQ,EAAEC,MAAM,EAAEC,EAAE,QAAQ,SAAQ;AAE7CF,SAAS,0CAA0C;IAClDE,GAAG,mDAAmD;QACrD,MAAMC,gBAA+B;YACpCC,OAAO;YACPC,QAAQ;YACRC,KAAKZ,WAAWa,OAAO;YACvBC,UAAUb,gBAAgBc,MAAM;YAChCC,QAAQd,uBAAuBe,IAAI;YACnCC,YAAYnB,kBAAkBoB,WAAW;YACzCC,eAAe;YACfC,SAAS;QACV;QAEA,MAAMC,oBAAoB;QAC1B,MAAMC,kBAAkB,CAAC,yBAAyB,EAAEd,cAAcC,KAAK,CAAC,CAAC,EAAED,cAAcE,MAAM,CAAC,mCAAmC,EAAEW,kBAAkB,aAAa,CAAC;QAErK,MAAME,YAAY,IAAIrB,uCAAuCM,eAAea;QAE5Ef,OAAOiB,UAAUC,OAAO,EAAEC,IAAI,CAACH;IAChC;IAEAf,GAAG,kCAAkC;QACpC,MAAMC,gBAA+B;YACpCC,OAAO;YACPC,QAAQ;YACRC,KAAKZ,WAAWa,OAAO;YACvBC,UAAUb,gBAAgBc,MAAM;YAChCC,QAAQd,uBAAuBe,IAAI;YACnCC,YAAYnB,kBAAkBoB,WAAW;YACzCC,eAAe;YACfC,SAAS;QACV;QAEA,MAAMC,oBAAoB;QAC1B,MAAME,YAAY,IAAIrB,uCAAuCM,eAAea;QAE5Ef,OAAOiB,WAAWG,cAAc,CAACC;IAClC;AACD;AAEAtB,SAAS,kCAAkC;IAC1CE,GAAG,mDAAmD;QACrD,MAAMqB,WAAW;QACjB,MAAMN,kBAAkB,CAAC,oBAAoB,EAAEM,SAAS,oBAAoB,CAAC;QAE7E,MAAML,YAAY,IAAIpB,+BAA+ByB;QAErDtB,OAAOiB,UAAUC,OAAO,EAAEC,IAAI,CAACH;IAChC;IAEAf,GAAG,kCAAkC;QACpC,MAAMqB,WAAW;QACjB,MAAML,YAAY,IAAIpB,+BAA+ByB;QAErDtB,OAAOiB,WAAWG,cAAc,CAACC;IAClC;AACD;AAEAtB,SAAS,yCAAyC;IACjDE,GAAG,mDAAmD;QACrD,MAAMqB,WAAW;QACjB,MAAMN,kBAAkB,CAAC,oBAAoB,EAAEM,SAAS,mBAAmB,CAAC;QAE5E,MAAML,YAAY,IAAInB,sCAAsCwB;QAE5DtB,OAAOiB,UAAUC,OAAO,EAAEC,IAAI,CAACH;IAChC;IAEAf,GAAG,kCAAkC;QACpC,MAAMqB,WAAW;QACjB,MAAML,YAAY,IAAInB,sCAAsCwB;QAE5DtB,OAAOiB,WAAWG,cAAc,CAACC;IAClC;AACD"}