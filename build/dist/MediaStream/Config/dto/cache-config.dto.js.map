{"version":3,"sources":["../../../../../src/MediaStream/Config/dto/cache-config.dto.ts"],"sourcesContent":["import { Transform, Type } from 'class-transformer'\r\nimport { IsBoolean, IsNumber, IsOptional, IsString, Max, Min, ValidateNested } from 'class-validator'\r\n\r\nexport class MemoryCacheConfigDto {\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 104857600)\r\n\tmaxSize: number = 104857600\r\n\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 3600)\r\n\tttl: number = 3600\r\n\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 600)\r\n\tcheckPeriod: number = 600\r\n\r\n\t@IsBoolean()\r\n\t@Transform(({ value }) => value === 'true' || value === true || false)\r\n\tuseClones: boolean = false\r\n\r\n\t@IsBoolean()\r\n\t@Transform(({ value }) => value === 'true' || value === true)\r\n\tdeleteOnExpire: boolean = true\r\n}\r\n\r\nexport class RedisConfigDto {\r\n\t@IsString()\r\n\t@Transform(({ value }) => value || 'localhost')\r\n\thost: string = 'localhost'\r\n\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Max(65535)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 6379)\r\n\tport: number = 6379\r\n\r\n\t@IsOptional()\r\n\t@IsString()\r\n\tpassword?: string\r\n\r\n\t@IsNumber()\r\n\t@Min(0)\r\n\t@Max(15)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 0)\r\n\tdb: number = 0\r\n\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 7200)\r\n\tttl: number = 7200\r\n\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 3)\r\n\tmaxRetries: number = 3\r\n\r\n\t@IsNumber()\r\n\t@Min(100)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 100)\r\n\tretryDelayOnFailover: number = 100\r\n}\r\n\r\nexport class FileCacheConfigDto {\r\n\t@IsString()\r\n\t@Transform(({ value }) => value || './storage')\r\n\tdirectory: string = './storage'\r\n\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 1073741824)\r\n\tmaxSize: number = 1073741824\r\n\r\n\t@IsNumber()\r\n\t@Min(1)\r\n\t@Transform(({ value }) => Number.parseInt(value) || 3600)\r\n\tcleanupInterval: number = 3600\r\n}\r\n\r\nexport class CacheConfigDto {\r\n\t@ValidateNested()\r\n\t@Type(() => MemoryCacheConfigDto)\r\n\tmemory: MemoryCacheConfigDto = new MemoryCacheConfigDto()\r\n\r\n\t@ValidateNested()\r\n\t@Type(() => RedisConfigDto)\r\n\tredis: RedisConfigDto = new RedisConfigDto()\r\n\r\n\t@ValidateNested()\r\n\t@Type(() => FileCacheConfigDto)\r\n\tfile: FileCacheConfigDto = new FileCacheConfigDto()\r\n}\r\n"],"names":["Transform","Type","IsBoolean","IsNumber","IsOptional","IsString","Max","Min","ValidateNested","MemoryCacheConfigDto","maxSize","ttl","checkPeriod","useClones","deleteOnExpire","value","Number","parseInt","RedisConfigDto","host","port","db","maxRetries","retryDelayOnFailover","FileCacheConfigDto","directory","cleanupInterval","CacheConfigDto","memory","redis","file"],"mappings":";;;;;;;;;AAAA,SAASA,SAAS,EAAEC,IAAI,QAAQ,oBAAmB;AACnD,SAASC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,GAAG,EAAEC,cAAc,QAAQ,kBAAiB;AAErG,OAAO,MAAMC;;aAIZC,UAAkB;aAKlBC,MAAc;aAKdC,cAAsB;aAItBC,YAAqB;aAIrBC,iBAA0B;;AAC3B;;;;eApBa,EAAEC,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;;eAKxC,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;;eAKxC,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;eAIxC,EAAEA,KAAK,EAAE,GAAKA,UAAU,UAAUA,UAAU,QAAQ;;;;;eAIpD,EAAEA,KAAK,EAAE,GAAKA,UAAU,UAAUA,UAAU;;;AAIzD,OAAO,MAAMG;;aAGZC,OAAe;aAMfC,OAAe;aAUfC,KAAa;aAKbV,MAAc;aAKdW,aAAqB;aAKrBC,uBAA+B;;AAChC;;;eAjCa,EAAER,KAAK,EAAE,GAAKA,SAAS;;;;;;;eAMvB,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;;;;;;;;eAUxC,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;;eAKxC,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;;eAKxC,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;;eAKxC,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;AAIrD,OAAO,MAAMS;;aAGZC,YAAoB;aAKpBf,UAAkB;aAKlBgB,kBAA0B;;AAC3B;;;eAZa,EAAEX,KAAK,EAAE,GAAKA,SAAS;;;;;;eAKvB,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;;;;eAKxC,EAAEA,KAAK,EAAE,GAAKC,OAAOC,QAAQ,CAACF,UAAU;;;AAIrD,OAAO,MAAMY;;aAGZC,SAA+B,IAAInB;aAInCoB,QAAwB,IAAIX;aAI5BY,OAA2B,IAAIN;;AAChC;;;aAVaf;;;;;aAIAS;;;;;aAIAM"}