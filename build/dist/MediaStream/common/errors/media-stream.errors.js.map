{"version":3,"sources":["../../../../../src/MediaStream/common/errors/media-stream.errors.ts"],"sourcesContent":["import { HttpStatus } from '@nestjs/common'\n\n/**\n * Base error class for all MediaStream errors\n * Provides additional context for error handling and logging\n */\nexport class MediaStreamError extends Error {\n\tpublic readonly status: HttpStatus\n\tpublic readonly code: string\n\tpublic readonly context: Record<string, any>\n\n\tconstructor(\n\t\tmessage: string,\n\t\tstatus: HttpStatus = HttpStatus.INTERNAL_SERVER_ERROR,\n\t\tcode: string = 'MEDIA_STREAM_ERROR',\n\t\tcontext: Record<string, any> = {},\n\t) {\n\t\tsuper(message)\n\t\tthis.name = this.constructor.name\n\t\tthis.status = status\n\t\tthis.code = code\n\t\tthis.context = context\n\t\tError.captureStackTrace(this, this.constructor)\n\t}\n\n\t/**\n\t * Converts the error to a JSON object for logging and response formatting\n\t */\n\tpublic toJSON(): Record<string, any> {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tmessage: this.message,\n\t\t\tstatus: this.status,\n\t\t\tcode: this.code,\n\t\t\tcontext: this.context,\n\t\t\tstack: this.stack,\n\t\t}\n\t}\n}\n\n/**\n * Error thrown when a resource is not found\n */\nexport class ResourceNotFoundError extends MediaStreamError {\n\tconstructor(\n\t\tmessage: string = 'Resource not found',\n\t\tcontext: Record<string, any> = {},\n\t) {\n\t\tsuper(message, HttpStatus.NOT_FOUND, 'RESOURCE_NOT_FOUND', context)\n\t}\n}\n\n/**\n * Error thrown when there's an issue with resource processing\n */\nexport class ResourceProcessingError extends MediaStreamError {\n\tconstructor(\n\t\tmessage: string = 'Failed to process resource',\n\t\tcontext: Record<string, any> = {},\n\t) {\n\t\tsuper(message, HttpStatus.INTERNAL_SERVER_ERROR, 'RESOURCE_PROCESSING_ERROR', context)\n\t}\n}\n\n/**\n * Error thrown when there's an issue with streaming a resource\n */\nexport class ResourceStreamingError extends MediaStreamError {\n\tconstructor(\n\t\tmessage: string = 'Failed to stream resource',\n\t\tcontext: Record<string, any> = {},\n\t) {\n\t\tsuper(message, HttpStatus.INTERNAL_SERVER_ERROR, 'RESOURCE_STREAMING_ERROR', context)\n\t}\n}\n\n/**\n * Error thrown when there's an issue with the default image fallback\n */\nexport class DefaultImageFallbackError extends MediaStreamError {\n\tconstructor(\n\t\tmessage: string = 'Failed to serve default image',\n\t\tcontext: Record<string, any> = {},\n\t) {\n\t\tsuper(message, HttpStatus.INTERNAL_SERVER_ERROR, 'DEFAULT_IMAGE_FALLBACK_ERROR', context)\n\t}\n}\n\n/**\n * Error thrown when there's an issue with the request parameters\n */\nexport class InvalidRequestError extends MediaStreamError {\n\tconstructor(\n\t\tmessage: string = 'Invalid request parameters',\n\t\tcontext: Record<string, any> = {},\n\t) {\n\t\tsuper(message, HttpStatus.BAD_REQUEST, 'INVALID_REQUEST', context)\n\t}\n}\n"],"names":["HttpStatus","MediaStreamError","Error","message","status","INTERNAL_SERVER_ERROR","code","context","name","captureStackTrace","toJSON","stack","ResourceNotFoundError","NOT_FOUND","ResourceProcessingError","ResourceStreamingError","DefaultImageFallbackError","InvalidRequestError","BAD_REQUEST"],"mappings":"AAAA,SAASA,UAAU,QAAQ,iBAAgB;AAE3C;;;CAGC,GACD,OAAO,MAAMC,yBAAyBC;IAKrC,YACCC,OAAe,EACfC,SAAqBJ,WAAWK,qBAAqB,EACrDC,OAAe,oBAAoB,EACnCC,UAA+B,CAAC,CAAC,CAChC;QACD,KAAK,CAACJ;QACN,IAAI,CAACK,IAAI,GAAG,IAAI,CAAC,WAAW,CAACA,IAAI;QACjC,IAAI,CAACJ,MAAM,GAAGA;QACd,IAAI,CAACE,IAAI,GAAGA;QACZ,IAAI,CAACC,OAAO,GAAGA;QACfL,MAAMO,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW;IAC/C;IAEA;;EAEC,GACD,AAAOC,SAA8B;QACpC,OAAO;YACNF,MAAM,IAAI,CAACA,IAAI;YACfL,SAAS,IAAI,CAACA,OAAO;YACrBC,QAAQ,IAAI,CAACA,MAAM;YACnBE,MAAM,IAAI,CAACA,IAAI;YACfC,SAAS,IAAI,CAACA,OAAO;YACrBI,OAAO,IAAI,CAACA,KAAK;QAClB;IACD;AACD;AAEA;;CAEC,GACD,OAAO,MAAMC,8BAA8BX;IAC1C,YACCE,UAAkB,oBAAoB,EACtCI,UAA+B,CAAC,CAAC,CAChC;QACD,KAAK,CAACJ,SAASH,WAAWa,SAAS,EAAE,sBAAsBN;IAC5D;AACD;AAEA;;CAEC,GACD,OAAO,MAAMO,gCAAgCb;IAC5C,YACCE,UAAkB,4BAA4B,EAC9CI,UAA+B,CAAC,CAAC,CAChC;QACD,KAAK,CAACJ,SAASH,WAAWK,qBAAqB,EAAE,6BAA6BE;IAC/E;AACD;AAEA;;CAEC,GACD,OAAO,MAAMQ,+BAA+Bd;IAC3C,YACCE,UAAkB,2BAA2B,EAC7CI,UAA+B,CAAC,CAAC,CAChC;QACD,KAAK,CAACJ,SAASH,WAAWK,qBAAqB,EAAE,4BAA4BE;IAC9E;AACD;AAEA;;CAEC,GACD,OAAO,MAAMS,kCAAkCf;IAC9C,YACCE,UAAkB,+BAA+B,EACjDI,UAA+B,CAAC,CAAC,CAChC;QACD,KAAK,CAACJ,SAASH,WAAWK,qBAAqB,EAAE,gCAAgCE;IAClF;AACD;AAEA;;CAEC,GACD,OAAO,MAAMU,4BAA4BhB;IACxC,YACCE,UAAkB,4BAA4B,EAC9CI,UAA+B,CAAC,CAAC,CAChC;QACD,KAAK,CAACJ,SAASH,WAAWkB,WAAW,EAAE,mBAAmBX;IAC3D;AACD"}