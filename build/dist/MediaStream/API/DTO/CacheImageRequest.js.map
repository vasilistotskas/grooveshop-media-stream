{"version":3,"sources":["../../../../../src/MediaStream/API/DTO/CacheImageRequest.ts"],"sourcesContent":["import { each } from 'lodash'\r\n\r\ninterface RGBA {\r\n\tr?: number | undefined\r\n\tg?: number | undefined\r\n\tb?: number | undefined\r\n\talpha?: number | undefined\r\n}\r\n\r\ntype Color = string | RGBA\r\n\r\nexport enum SupportedResizeFormats {\r\n\twebp = 'webp',\r\n\tjpeg = 'jpeg',\r\n\tpng = 'png',\r\n\tgif = 'gif',\r\n\ttiff = 'tiff'\r\n}\r\n\r\nexport enum PositionOptions {\r\n\tcentre = 'centre',\r\n\tcenter = 'center',\r\n\tleft = 'left',\r\n\tright = 'right',\r\n\ttop = 'top',\r\n\tbottom = 'bottom',\r\n\twest = 'west',\r\n\teast = 'east',\r\n\tnorth = 'north',\r\n\tsouth = 'south',\r\n\tnorthwest = 'northwest',\r\n\tnortheast = 'northeast',\r\n\tsouthwest = 'southwest',\r\n\tsoutheast = 'southeast',\r\n\tentropy = 'entropy',\r\n\tattention = 'attention'\r\n}\r\n\r\nexport enum BackgroundOptions {\r\n\twhite = '#FFFFFF',\r\n\tblack = '#000000',\r\n\ttransparent = 'transparent'\r\n}\r\n\r\nexport enum FitOptions {\r\n\tcontain = 'contain',\r\n\tcover = 'cover',\r\n\tfill = 'fill',\r\n\tinside = 'inside',\r\n\toutside = 'outside'\r\n}\r\n\r\nfunction parseColor(color: string): RGBA {\r\n\t// Convert the background property from a hex color string to an RGBA color object\r\n\tif (typeof color === 'string') {\r\n\t\tif (color === 'transparent') {\r\n\t\t\treturn {\r\n\t\t\t\tr: 0,\r\n\t\t\t\tg: 0,\r\n\t\t\t\tb: 0,\r\n\t\t\t\talpha: 0\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (color[0] === '#') {\r\n\t\t\tcolor = color.slice(1)\r\n\t\t}\r\n\t\tif (color.length === 3) {\r\n\t\t\tcolor = color\r\n\t\t\t\t.split('')\r\n\t\t\t\t.map(function (char) {\r\n\t\t\t\t\treturn char + char\r\n\t\t\t\t})\r\n\t\t\t\t.join('')\r\n\t\t}\r\n\t\tconst num = parseInt(color, 16)\r\n\t\tconst colorToRgba = {\r\n\t\t\tr: num >> 16,\r\n\t\t\tg: (num >> 8) & 255,\r\n\t\t\tb: num & 255,\r\n\t\t\talpha: 1\r\n\t\t}\r\n\t\treturn colorToRgba\r\n\t}\r\n\treturn color\r\n}\r\n\r\nexport class ResizeOptions {\r\n\twidth: number = null\r\n\theight: number = null\r\n\tfit = FitOptions.contain\r\n\tposition: PositionOptions | string = PositionOptions.entropy\r\n\tformat = SupportedResizeFormats.webp\r\n\tbackground: Color = BackgroundOptions.white\r\n\ttrimThreshold: null | number = null\r\n\tquality = 100\r\n\r\n\tconstructor(data?: Partial<ResizeOptions>) {\r\n\t\tconst { width, height, trimThreshold, background, fit, position, format, quality, ...rest } = data || {}\r\n\t\tthis.width = width ?? null\r\n\t\tthis.height = height ?? null\r\n\t\tthis.trimThreshold = trimThreshold ? Number(trimThreshold) : null\r\n\t\tthis.background = typeof background === 'string' ? parseColor(background) : background\r\n\t\tthis.fit = fit ?? FitOptions.contain\r\n\t\tthis.position = position ?? PositionOptions.entropy\r\n\t\tthis.format = format ?? SupportedResizeFormats.webp\r\n\t\tthis.quality = Number(quality) ?? 100\r\n\r\n\t\tObject.assign(this, rest)\r\n\t\teach(['width', 'height'], (sizeOption) => {\r\n\t\t\tif (null === data[sizeOption]) delete this[sizeOption]\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport default class CacheImageRequest {\r\n\tresourceTarget: string\r\n\tttl?: number\r\n\tresizeOptions: ResizeOptions\r\n\r\n\tconstructor(data?: Partial<CacheImageRequest>) {\r\n\t\tObject.assign(this, data)\r\n\t}\r\n}\r\n"],"names":["ResizeOptions","CacheImageRequest","SupportedResizeFormats","PositionOptions","BackgroundOptions","FitOptions","parseColor","color","r","g","b","alpha","slice","length","split","map","char","join","num","parseInt","colorToRgba","constructor","data","width","height","fit","position","format","background","trimThreshold","quality","rest","Number","Object","assign","each","sizeOption"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;;;;;;;;;;IAsFaA,aAAa;eAAbA;;;;;;eA4BQC;;;wBAlHA;;UAWTC;;;;;;GAAAA,2BAAAA;;UAQAC;;;;;;;;;;;;;;;;;GAAAA,oBAAAA;;UAmBAC;;;;GAAAA,sBAAAA;;UAMAC;;;;;;GAAAA,eAAAA;AAQZ,SAASC,WAAWC,KAAa;IAChC,kFAAkF;IAClF,IAAI,OAAOA,UAAU,UAAU;QAC9B,IAAIA,UAAU,eAAe;YAC5B,OAAO;gBACNC,GAAG;gBACHC,GAAG;gBACHC,GAAG;gBACHC,OAAO;YACR;QACD;QACA,IAAIJ,KAAK,CAAC,EAAE,KAAK,KAAK;YACrBA,QAAQA,MAAMK,KAAK,CAAC;QACrB;QACA,IAAIL,MAAMM,MAAM,KAAK,GAAG;YACvBN,QAAQA,MACNO,KAAK,CAAC,IACNC,GAAG,CAAC,SAAUC,IAAI;gBAClB,OAAOA,OAAOA;YACf,GACCC,IAAI,CAAC;QACR;QACA,MAAMC,MAAMC,SAASZ,OAAO;QAC5B,MAAMa,cAAc;YACnBZ,GAAGU,OAAO;YACVT,GAAG,AAACS,OAAO,IAAK;YAChBR,GAAGQ,MAAM;YACTP,OAAO;QACR;QACA,OAAOS;IACR;IACA,OAAOb;AACR;AAEO,IAAA,AAAMP,gBAAN,MAAMA;IAUZqB,YAAYC,IAA6B,CAAE;aAT3CC,QAAgB;aAChBC,SAAiB;aACjBC;aACAC;aACAC;aACAC;aACAC,gBAA+B;aAC/BC,UAAU;QAGT,MAAM,EAAEP,KAAK,EAAEC,MAAM,EAAEK,aAAa,EAAED,UAAU,EAAEH,GAAG,EAAEC,QAAQ,EAAEC,MAAM,EAAEG,OAAO,EAAE,GAAGC,MAAM,GAAGT,QAAQ,CAAC;QACvG,IAAI,CAACC,KAAK,GAAGA,SAAS;QACtB,IAAI,CAACC,MAAM,GAAGA,UAAU;QACxB,IAAI,CAACK,aAAa,GAAGA,gBAAgBG,OAAOH,iBAAiB;QAC7D,IAAI,CAACD,UAAU,GAAG,OAAOA,eAAe,WAAWtB,WAAWsB,cAAcA;QAC5E,IAAI,CAACH,GAAG,GAAGA;QACX,IAAI,CAACC,QAAQ,GAAGA;QAChB,IAAI,CAACC,MAAM,GAAGA;QACd,IAAI,CAACG,OAAO,GAAGE,OAAOF,YAAY;QAElCG,OAAOC,MAAM,CAAC,IAAI,EAAEH;QACpBI,IAAAA,YAAI,EAAC;YAAC;YAAS;SAAS,EAAE,CAACC;YAC1B,IAAI,SAASd,IAAI,CAACc,WAAW,EAAE,OAAO,IAAI,CAACA,WAAW;QACvD;IACD;AACD;AAEe,IAAA,AAAMnC,oBAAN,MAAMA;IAKpBoB,YAAYC,IAAiC,CAAE;QAC9CW,OAAOC,MAAM,CAAC,IAAI,EAAEZ;IACrB;AACD"}